<h1><center> Dependency-Injection(1) </center></h1>

###### tags: `π’» TIL`, `DI`
###### date: `2024-01-12T15:12:33.284Z`

> [color=#724cd1][name=λ°λ¦­]
> [Dependency-Injection-part01](https://www.phaverageprogrammer.com/post/dependency-injection-part-1) <br>
> [Dependency Injection Wikipedia](https://ko.wikipedia.org/wiki/%EC%9D%98%EC%A1%B4%EC%84%B1_%EC%A3%BC%EC%9E%85)
# κ°μ” 

> μ¤λμ€ [jennifer-eve-vega](https://www.linkedin.com/in/jennifer-eve-vega-b88040181/?originalSubdomain=ph)κ°€ μ“΄ Dependency Injectionμ— λ€ν•΄ ν•™μµν•΄λ³΄κ³ μ ν•λ‹¤. μ„ν‚¤λ°±κ³Όλ„ κ°™μ΄ μ½μ–΄λ³Έλ‹¤. 

## Dependency Injection

> μμ΅΄μ„± μ£Όμ…μ€ ν•λ‚μ κ°μ²΄κ°€ λ‹¤λ¥Έ κ°μ²΄μ μμ΅΄μ„±μ„ μ κ³µν•λ” κΈ°μ μ΄λ‹¤. `μμ΅΄μ„±`μ€ μλ¥Ό λ“¤μ–΄ μ„λΉ„μ¤λ΅ μ‚¬μ©ν•  μ μλ” κ°μ²΄λ¥Ό λ§ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ–΄λ–¤ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•  κ²ƒμΈμ§€ μ§€μ •ν•λ” λ€μ‹ , ν΄λΌμ΄μ–ΈνΈμ—κ² λ¬΄μ¨ μ„λΉ„μ¤λ¥Ό μ‚¬μ©ν•  κ²ƒμΈμ§€λ¥Ό λ§ν•΄μ£Όλ” κ²ƒμ΄λ‹¤. `μ£Όμ…`μ€ μμ΅΄μ„±(μ„λΉ„μ¤ κ°μ²΄)μ„ μ‚¬μ©ν•λ ¤λ” ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ΅ μ „λ‹¬ν•λ” κ²ƒμ„ μλ―Έν•λ‹¤. μ„λΉ„μ¤λ” ν΄λΌμ΄μ–ΈνΈμ μƒνƒ ν”„λ΅νΌν‹° μ¤‘ ν•λ‚λΌκ³  ν•  μ μλ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λΉ„μ¤λ¥Ό κµ¬μ¶•ν•κ±°λ‚ μ°Ύλ” κ²ƒμ„ ν—μ©ν•λ” λ€μ‹  ν΄λΌμ΄μ–ΈνΈμ—κ² μ„λΉ„μ¤λ¥Ό μ „λ‹¬ν•λ” κ²ƒμ΄ ν¨ν„΄μ κΈ°λ³Έ μ”κ±΄μ΄λ‹¤. 

**μμ΅΄μ„± μ£Όμ…μ μλ„λ” κ°μ²΄μ μƒμ„±κ³Ό μ‚¬μ©μ κ΄€μ‹¬μ„ λ¶„λ¦¬ν•λ”κ²ƒμ΄λ‹¤.** μ΄λ” κ°€λ…μ„±κ³Ό μ½”λ“μ μ¬μ‚¬μ©μ„±μ„ λ†’ν€μ£Όλ” ν¨κ³Όκ°€ μλ‹¤.

κ·Έλ¦¬κ³  μ–΄λ–¤ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ ¤λ” ν΄λΌμ΄μ–ΈνΈλ” κ·Έ μ„λΉ„μ¤κ°€ μ–΄λ–»κ² κµ¬μ„±λμ–΄μλ”μ§€ λ°λΌμ•Ό ν•λ‹¤. λ€μ‹  ν΄λΌμ΄μ–ΈνΈλ” μ„λΉ„μ¤ μ κ³µμ— λ€ν• μ±…μ„μ„ μ™Έλ¶€ μ½”λ“(injection)λ΅ μ„μ„ν•κ² λλ‹¤. μ¦‰, ν΄λΌμ΄μ–ΈνΈλ” μ™Έλ¶€ μ½”λ“λ¥Ό μ§μ ‘μ μΌλ΅ νΈμ¶ν•  μ μ—†λ‹¤. μ£Όμ…μμ— μν•΄ μ„λΉ„μ¤λ¥Ό μ£Όμ…λ°›μ€ ν΄λΌμ–ΈνΈλ” μ‹¤μ  μ„λΉ„μ¤μ μƒμ„±μ΄λ‚ κµ¬ν„μ²΄ λ¶€λ¶„μ— λ€ν•΄ μ• ν•„μ”κ°€ μ—†λ‹¤. λ‹¨μ§€ μ£Όμ…λ μ„λΉ„μ¤λ¥Ό ν™μ©ν•μ—¬ μ›ν•λ” κΈ°λ¥μ„ μν–‰ν•  λΏμ΄λ‹¤. 

μ¦‰, ν΄λΌμ΄μ–ΈνΈλ” μ„λΉ„μ¤μ μ‚¬μ© λ°©μ‹μ„ μ •μν•κ³  μλ” μ„λΉ„μ¤μ κ³ μ ν• μΈν„°νμ΄μ¤μ— λ€ν•΄μ„λ§ μ•λ©΄ λλ‹¤. μ΄κ²ƒμ€ `κµ¬μ„±`μ μ±…μ„μΌλ΅λ¶€ν„° `μ‚¬μ©`μ μ±…μ„μ„ κµ¬λ¶„ν•λ‹¤.

## μμ΅΄μ„± μ£Όμ…μ΄ ν•΄κ²°ν•  μ μλ” λ¬Έμ 

νΉμ • κ°μ²΄λ¥Ό ν•„μ”λ΅ ν•λ” ν΄λμ¤ λ‚΄μ—μ„ μ§μ ‘ κ°μ²΄λ¥Ό μƒμ„±ν•λ” κ²ƒμ€ ν΄λμ¤λ¥Ό νΉμ • κ°μ²΄μ— μμ΅΄ν•κ² ν•λ” κ²ƒμ΄κΈ° λ•λ¬Έμ— μ μ—°ν•μ§€ λ»ν• μ½”λ“λ¥Ό λ§λ“¤ μ μλ‹¤. μ΄λ” λ‹¤λ¥Έ κ°μ²΄λ¥Ό ν•„μ”λ΅ ν•λ” κ²½μ° μ¬μ‚¬μ©μ„ ν•  μ μ—†κ² λ§λ“¤ μ μλ‹¤. λν•, κ°μ²΄λ¥Ό Mock κ°μ²΄λ΅ λ€μ²΄ν•  μ μ—†κΈ° λ•λ¬Έμ— ν΄λμ¤λ¥Ό ν…μ¤νΈν•κΈ° νλ“¤κ² ν•λ‹¤. 

## μμ 

μλ¥Ό λ“¤μ–΄, μ–΄λ–¤ μ‘μ—…μ„ μν–‰ν•κΈ° μ„ν•΄ Class Bμ— μμ΅΄ν•λ” Class Aκ°€ μλ‹¤κ³  κ°€μ •ν•΄λ³΄μ. μ΄ μƒν™©μ—μ„ ν΄λμ¤ λ‚΄μ—μ„ μμ΅΄μ„±μ„ μƒμ„±ν•λ” λ³€μλ¥Ό μ„ μ–Έν•λ” λ€μ‹ μ— μμ΅΄μ„±μ„ μ£Όμ…ν•  μ μλ‹¤.

![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-01-12 23.05.29](https://hackmd.io/_uploads/rkV4DaAuT.png)

```swift 
final class MyAPIClient: APIClient {
    func execute() async throws -> Result<Void, Error> 
}

final class MyRepository {
    private let apiService = MyAPIClient() // μμ΅΄ν•λ” κ°μ²΄λ¥Ό λ‚΄λ¶€μ—μ„ μƒμ„± 

    func didSomething() {
        let result = try await apiService.execute()
        ...
    }
}
```

![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-01-12 23.08.14](https://hackmd.io/_uploads/BkdAwaRO6.png)

MyRepositoryκ°€ MyAPIClientμ— μμ΅΄ν•λ” μƒν™©μ΄λ‹¤. λ¬Έμ λ” MyRepository λ‚΄λ¶€μ— MyAPIClient κ°μ²΄λ¥Ό μƒμ„±ν• κ²ƒμ΄λ‹¤. μ΄λ° κµ¬μ΅°λ” MyRepositoryμ Unit testλ¥Ό ν•κΈ° μ–΄λ µλ‹¤. κ·Έ μ΄μ λ”, MyAPIClientλ¥Ό λ‚΄λ¶€μ—μ„ μ§μ ‘ μƒμ„±ν•μ—¬ νΈμ¶ν•κΈ° λ•λ¬Έμ΄λ‹¤. 

ν•μ§€λ§ ν…μ¤νΈλ¥Ό μ§„ν–‰ν•  λ•, Mock κ°μ²΄λ΅ λ§λ“¤μ–΄μ„ μƒν™©μ„ κ°€μ •ν•λ ¤λ©΄ μ™Έλ¶€μ—μ„ Dependency injectionκ³Ό Protocolμ„ μ‚¬μ©ν•λ©΄ μ‰½κ² Mock κ°μ²΄λ¥Ό λ§λ“¤μ–΄μ„ MyRepositoryλ¥Ό ν…μ¤νΈν•  μ μλ‹¤. 

μ„μ—μ„ μ„¤λ…ν• κ²ƒμ²λΌ, Dependency Injectionκ³Ό Protocolμ„ μ‚¬μ©ν•λ©΄ λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤. Dependency Injectionμ€ ν΄λμ¤λ¥Ό λ¶„λ¦¬ν•κΈ° μ•„μ£Ό μΆ‹μ€ λ°©λ²•μ΄κ³ , Scalable and Testableν• κ°μ²΄λ¥Ό λ§λ“¤ μ μλ‹¤. 

![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2024-01-12 23.17.09](https://hackmd.io/_uploads/Bylx9aAua.png)
